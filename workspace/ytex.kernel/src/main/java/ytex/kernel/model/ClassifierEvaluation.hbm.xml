<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="ytex.kernel.model">
	<class name="FeatureEvaluation" table="feature_eval">
		<id name="featureEvaluationId" column="feature_eval_id">
			<generator class="native">
				<param name="sequence">feature_eval_sequence</param>
			</generator>
		</id>
		<property name="name" />
		<property name="label" />
		<property name="crossValidationFoldId" column="cv_fold_id" />
		<property name="evaluationType" column="type" />
		<list name="features" table="feature_rank" cascade="all">
			<key column="feature_eval_id"/>
			<list-index column="rank" base="1" />
			<composite-element class="FeatureRank">
				<property name="featureName" column="feature_name"/>
				<property name="evaluation" column="evaluation"/>
			</composite-element>
		</list>
	</class>

	<class name="CrossValidationFold" table="cv_fold">
		<id name="crossValidationFoldId" column="cv_fold_id">
			<generator class="native">
				<param name="sequence">classifier_fold_sequence</param>
			</generator>
		</id>
		<property name="name" />
		<property name="label" />
		<property name="run" />
		<property name="fold" />
		<!--   property name="train" /-->
		<set name="instanceIds" table="cv_fold_instance" cascade="all">
			<key column="cv_fold_id" />
			<composite-element class="CrossValidationFoldInstance">
				<property name="instanceId" column="instance_id" type="int" />
				<property name="train" />
			</composite-element>
		</set>
	</class>
	<class name="ClassifierEvaluation" table="classifier_eval">
		<id name="classifierEvaluationId" column="classifier_eval_id">
			<generator class="native">
				<param name="sequence">classifier_eval_sequence</param>
			</generator>
		</id>
		<property name="name" />
		<property name="experiment" />
		<property name="fold" />
		<property name="algorithm" />
		<property name="label" />
		<property name="options" />
		<property name="model" column="model" type="binary" />

		<map name="classifierInstanceEvaluations" inverse="true"
			table="classifier_instance_eval">
			<key column="classifier_eval_id" />
			<map-key column="instance_id" type="int" />
			<one-to-many class="ClassifierInstanceEvaluation" />
		</map>
		<joined-subclass name="LibSVMClassifierEvaluation"
			table="classifier_eval_libsvm">
			<key column="classifier_eval_id" />
			<property name="cost" />
			<property name="weight" />
			<property name="degree" />
			<property name="gamma" />
			<property name="kernel" />
			<property name="supportVectors" />
		</joined-subclass>
	</class>
	<class name="ClassifierInstanceEvaluation" table="classifier_instance_eval">
		<id name="classifierInstanceEvaluationId" column="classifier_instance_eval_id">
			<generator class="native">
				<param name="sequence">classifier_eval_sequence</param>
			</generator>
		</id>
		<property name="instanceId" column="instance_id" />
		<property name="predictedClassId" column="pred_class_id" />
		<property name="targetClassId" column="target_class_id" />
		<many-to-one name="classifierEvaluation" class="ClassifierEvaluation"
			column="classifier_eval_id" not-null="true" />
		<map name="classifierInstanceProbabilities" table="classifier_instance_eval_prob">
			<key column="classifier_instance_eval_id" />
			<map-key column="class_id" type="int" />
			<element column="probability" type="double" />
		</map>
	</class>
	<query name="getCrossValidationFoldByName">
		from CrossValidationFold where name = :name
	</query>
	<query name="getFeatureEvaluationByNameAndType">
		from FeatureEvaluation where name = :name and type = :type
	</query>
	

</hibernate-mapping>