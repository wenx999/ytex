<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC "-//Hibernate/Hibernate Mapping DTD 3.0//EN" "http://hibernate.sourceforge.net/hibernate-mapping-3.0.dtd">
<hibernate-mapping package="ytex.kernel.model">
	<class name="Corpus" table="corpus">
		<id name="corpusId" column="corpus_id">
			<generator class="native">
				<param name="sequence">corpus_id</param>
			</generator>
		</id>
		<property name="corpusName" column="corpus_name"/>
	</class>
	<class name="CorpusTerm" table="corpus_term">
		<id name="corpusTermId" column="corpus_term_id">
			<generator class="native">
				<param name="sequence">corpus_term_id</param>
			</generator>
		</id>
		<many-to-one name="corpus" column="corpus_id" />
		<property name="conceptId" column="concept_id" />
		<property name="frequency" />
		<property name="informationContent" column="info_content" />
	</class>
	<class name="InfoContent" table="info_content">
		<id name="infoContentId" column="info_content_id">
			<generator class="native">
				<param name="sequence">info_content_id</param>
			</generator>
		</id>
		<many-to-one name="corpus" column="corpus_id" />
		<property name="conceptId" column="concept_id" />
		<property name="frequency" column="frequency" />
		<property name="informationContent" column="info_content" />
	</class>
	<!--
		hibernate batch update sucks <query
		name="clearCorpusFrequency"><![CDATA[ delete CorpusTerm where
		corpus.corpusId = (select corpus.corpusId where corpusName =
		:corpusName) ]]></query> <query name="clearCorpus"><![CDATA[ delete
		Corpus where corpusName = :corpusName ]]></query> <query
		name="getTermFrequency"><![CDATA[ select o.code, count(*) from
		OntologyConceptAnnotation o where
		o.namedEntityAnnotation.document.analysisBatch in (:analysisBatches)
		group by o.code ]]></query> <query name="getTotalTermCount"><![CDATA[
		select count(*) from CorpusTerm where corpus.corpusName = :corpusName
		]]></query> <query name="finalizeCorpusFrequency"><![CDATA[ update
		CorpusTerm set frequency = frequency/:total where corpus.corpusName =
		:corpusName ]]></query>
	-->
	<query name="getTerms"><![CDATA[
		from CorpusTerm
		where corpus.corpusName = :corpusName 
	]]></query>
	<query name="getCorpus"><![CDATA[
		from Corpus
		where corpusName = :corpusName 
	]]></query>
	<query name="getInfoContent"><![CDATA[
		from InfoContent
		where corpus.corpusName in (:corpusNames) 
	]]></query>	
		
</hibernate-mapping>